<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AI æ··åˆç¾¤èŠ</title>
    <style>
        :root {
            --wechat-green: #07c160;
            --wechat-bg: #f3f3f3;
            --wechat-header: #ededed;
            --border-color: #ddd;
            --text-main: #191919;
            --text-sub: #888;
        }

        /* åŸºç¡€æ ·å¼ï¼šå¼ºåˆ¶å…¨å± */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
            background-color: var(--wechat-bg); overflow: hidden;
        }

        #app {
            display: flex; flex-direction: column; height: 100%; width: 100%;
            position: relative;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: var(--wechat-header); height: 50px; flex-shrink: 0;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; border-bottom: 1px solid var(--border-color);
            font-size: 16px; font-weight: 500; z-index: 10;
        }

        /* æ¶ˆæ¯åˆ—è¡¨ */
        #message-list {
            flex: 1; overflow-y: auto; padding: 15px;
            display: flex; flex-direction: column; gap: 20px;
            -webkit-overflow-scrolling: touch;
        }

        /* æ¶ˆæ¯æ ·å¼ */
        .msg { display: flex; align-items: flex-start; gap: 10px; max-width: 90%; }
        .avatar {
            width: 42px; height: 42px; border-radius: 4px; flex-shrink: 0;
            background: #4a90e2; color: white; display: flex;
            align-items: center; justify-content: center; font-weight: bold; font-size: 14px;
        }
        .content-box { display: flex; flex-direction: column; max-width: calc(100% - 52px); }
        .nickname { font-size: 12px; color: var(--text-sub); margin-bottom: 4px; }
        
        .bubble {
            padding: 10px 12px; border-radius: 6px; position: relative;
            line-height: 1.5; font-size: 15px; background: #fff; border: 0.5px solid #e7e7e7;
        }

        /* å·¦å³é€»è¾‘ */
        .msg.left { align-self: flex-start; }
        .msg.left .bubble::before {
            content: ""; position: absolute; left: -10px; top: 10px;
            border: 5px solid transparent; border-right-color: #fff;
        }
        .msg.right { align-self: flex-end; flex-direction: row-reverse; }
        .msg.right .nickname { display: none; }
        .msg.right .bubble { background: #95ec69; border: none; }
        .msg.right .bubble::after {
            content: ""; position: absolute; right: -10px; top: 10px;
            border: 5px solid transparent; border-left-color: #95ec69;
        }

        /* å¼•ç”¨æ¡†æ ·å¼ */
        .quote-box {
            background: #e1e1e1; padding: 6px; border-radius: 4px;
            font-size: 12px; color: #666; margin-top: 4px;
            max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
        }

        /* åº•éƒ¨è¾“å…¥åŒº */
        footer {
            background: #f7f7f7; border-top: 1px solid var(--border-color);
            padding-bottom: env(safe-area-inset-bottom); flex-shrink: 0;
        }
        .input-bar { display: flex; align-items: center; padding: 10px; gap: 8px; }
        .icon-btn { width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        #input-msg {
            flex: 1; border: none; padding: 10px; border-radius: 6px;
            outline: none; font-size: 16px; background: #fff; min-height: 40px;
        }
        #send-btn {
            background: var(--wechat-green); color: #fff; border: none;
            padding: 8px 15px; border-radius: 4px; font-size: 14px;
            display: none; /* åˆå§‹éšè— */
        }

        /* ç¾¤æˆå‘˜é¡µé¢ï¼ˆå…¨å±è¦†ç›–ï¼‰ */
        #member-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ededed; z-index: 1000; display: none; flex-direction: column;
        }
        .member-grid {
            flex: 1; overflow-y: auto; padding: 20px;
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
        }
        .member-item { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .member-avatar { width: 50px; height: 50px; border-radius: 6px; background: #fff; display: flex; align-items: center; justify-content: center; font-size: 20px; border: 1px solid #ddd; }
        .member-name { font-size: 12px; color: #666; width: 60px; text-align: center; white-space: nowrap; overflow: hidden; }

        /* åª’ä½“é¢„è§ˆ */
        .media-file { max-width: 180px; border-radius: 4px; display: block; margin-top: 5px; }
    </style>
</head>
<body>

<div id="app">
    <header>
        <span onclick="alert('è¿”å›æ¶ˆæ¯åˆ—è¡¨')">â€¹ å¾®ä¿¡</span>
        <span id="group-title">LLM è¯¸ç¥ä¹‹æˆ˜(12)</span>
        <span onclick="toggleMembers()" style="font-size: 24px;">Â·Â·Â·</span>
    </header>
    
    <div id="message-list">
        <div style="text-align:center; color:#b2b2b2; font-size:12px; margin:10px 0;">15:40</div>
        <div class="msg left" onclick="quote('DeepSeek', 'æ¬¢è¿æ¥åˆ° AI æ—…è¡Œè€…ç¾¤èŠï¼')">
            <div class="avatar" style="background:#005fb8">D</div>
            <div class="content-box">
                <div class="nickname">DeepSeek-V3</div>
                <div class="bubble">æ¬¢è¿ï¼ç‚¹å‡»å³ä¸Šè§’æŸ¥çœ‹æˆå‘˜ã€‚ä½ å¯ä»¥å‘é€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ï¼Œæˆ–è€…ç‚¹å‡»æˆ‘è¿™æ¡æ¶ˆæ¯æ¥â€œå¼•ç”¨â€ã€‚</div>
            </div>
        </div>
    </div>

    <div id="quote-preview" style="display:none; background:#eee; padding:5px 15px; font-size:12px; color:#666; justify-content:space-between;">
        <span id="quote-text"></span>
        <span onclick="cancelQuote()">Ã—</span>
    </div>

    <footer>
        <div class="input-bar">
            <div class="icon-btn" onclick="alert('è¯­éŸ³é€šè¯åŠŸèƒ½éœ€ API æ”¯æŒ')">
                <svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" fill="#333"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="#333"/></svg>
            </div>
            
            <input type="text" id="input-msg" placeholder="">
            
            <div class="icon-btn" onclick="alert('è¡¨æƒ…åº“')">â˜º</div>

            <div class="icon-btn" id="plus-btn" onclick="document.getElementById('file-input').click()">âŠ•</div>
            <button id="send-btn" onclick="handleSend()">å‘é€</button>
        </div>
        <input type="file" id="file-input" style="display:none" accept="image/*,video/*,audio/*">
    </footer>

    <div id="member-page">
        <header>
            <span onclick="toggleMembers()">â€¹ èŠå¤©ä¿¡æ¯</span>
            <span></span>
            <span></span>
        </header>
        <div class="member-grid" id="member-container">
            </div>
        <div style="background:#fff; margin-top:10px; padding:15px; color:#ff4d4f; text-align:center; font-weight:500;">åˆ é™¤å¹¶é€€å‡º</div>
    </div>
</div>

<script>
    const members = [
        { name: 'GPT-4o', icon: 'ğŸ¤–' }, { name: 'Claude 3.5', icon: 'ğŸ­' },
        { name: 'Gemini 1.5', icon: 'â™Š' }, { name: 'DeepSeek', icon: 'ğŸ‹' },
        { name: 'Llama 3.1', icon: 'ğŸ¦™' }, { name: 'Qwen 2.5', icon: 'ğŸŸ£' },
        { name: 'Kimi', icon: 'ğŸŒ™' }, { name: 'Mistral', icon: 'ğŸŒªï¸' },
        { name: 'Grok-2', icon: 'âœ–ï¸' }, { name: 'Yi-Large', icon: 'é›¶' },
        { name: 'æµ·èºAI', icon: 'ğŸš' }, { name: 'æ·»åŠ ', icon: 'ï¼‹' }
    ];

    const input = document.getElementById('input-msg');
    const sendBtn = document.getElementById('send-btn');
    const plusBtn = document.getElementById('plus-btn');
    const msgList = document.getElementById('message-list');
    const memberPage = document.getElementById('member-page');
    const quoteBar = document.getElementById('quote-preview');
    let currentQuote = null;

    // åˆå§‹åŒ–æˆå‘˜åˆ—è¡¨
    const container = document.getElementById('member-container');
    members.forEach(m => {
        container.innerHTML += `
            <div class="member-item">
                <div class="member-avatar">${m.icon}</div>
                <div class="member-name">${m.name}</div>
            </div>`;
    });

    // æŒ‰é’®åˆ‡æ¢é€»è¾‘
    input.addEventListener('input', () => {
        const hasText = input.value.trim().length > 0;
        sendBtn.style.display = hasText ? 'block' : 'none';
        plusBtn.style.display = hasText ? 'none' : 'flex';
    });

    function toggleMembers() {
        memberPage.style.display = memberPage.style.display === 'flex' ? 'none' : 'flex';
    }

    function quote(user, text) {
        currentQuote = { user, text };
        quoteBar.style.display = 'flex';
        document.getElementById('quote-text').innerText = `å¼•ç”¨ ${user}: ${text.substring(0,12)}...`;
        input.focus();
    }

    function cancelQuote() {
        currentQuote = null;
        quoteBar.style.display = 'none';
    }

    function appendMsg({role, nickname, content, type='text', avatar='æˆ‘', color='#07c160', quoteData}) {
        const div = document.createElement('div');
        div.className = `msg ${role}`;
        
        let body = '';
        if(type === 'text') body = `<div class="bubble">${content}</div>`;
        else if(type === 'image') body = `<div class="bubble" style="background:none;border:none;padding:0"><img src="${content}" class="media-file"></div>`;
        else if(type === 'video') body = `<div class="bubble" style="background:none;border:none;padding:0"><video src="${content}" controls class="media-file"></video></div>`;
        else if(type === 'audio') body = `<div class="bubble"><audio src="${content}" controls style="width:160px;height:30px;"></audio></div>`;

        let qHtml = quoteData ? `<div class="quote-box">${quoteData.user}: ${quoteData.text}</div>` : '';

        div.innerHTML = `
            <div class="avatar" style="background:${color}">${avatar[0]}</div>
            <div class="content-box">
                <div class="nickname">${nickname}</div>
                ${body}
                ${qHtml}
            </div>`;
        
        msgList.appendChild(div);
        msgList.scrollTop = msgList.scrollHeight;
    }

    function handleSend() {
        const text = input.value.trim();
        if(!text) return;

        appendMsg({ role:'right', nickname:'æˆ‘', content: text, quoteData: currentQuote });
        
        if(text.includes('@DeepSeek') || text.includes('@æ‰€æœ‰äºº')) {
            setTimeout(() => {
                appendMsg({ role:'left', nickname:'DeepSeek', content:'ä½ å¥½ï¼æ­£åœ¨ä¸ºä½ åˆ†æä¸­...', avatar:'D', color:'#005fb8' });
            }, 800);
        }

        input.value = '';
        sendBtn.style.display = 'none';
        plusBtn.style.display = 'flex';
        cancelQuote();
    }

    document.getElementById('file-input').onchange = (e) => {
        const file = e.target.files[0];
        if(!file) return;
        const reader = new FileReader();
        const type = file.type.split('/')[0];
        reader.onload = (ev) => {
            appendMsg({ role:'right', nickname:'æˆ‘', content: ev.target.result, type: type });
        };
        reader.readAsDataURL(file);
    };
</script>
</body>
</html>
