<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AI æ··åˆç¾¤èŠ</title>
    <style>
        :root {
            --wechat-green: #07c160;
            --wechat-bg: #f3f3f3;
            --wechat-header: #ededed;
            --border-color: #ddd;
            --text-main: #191919;
            --text-sub: #888;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
            background-color: #000; overflow: hidden;
        }

        /* ä¸»å®¹å™¨ï¼šå¼ºåˆ¶å…¨å± */
        #chat-wrapper {
            display: flex; flex-direction: column; 
            height: 100vh; width: 100%;
            background-color: var(--wechat-bg);
            position: relative;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            background: var(--wechat-header);
            height: 50px; display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; border-bottom: 1px solid var(--border-color);
            flex-shrink: 0; font-size: 16px; z-index: 100;
        }

        /* æ¶ˆæ¯åˆ—è¡¨ */
        #message-list {
            flex: 1; overflow-y: auto; padding: 15px;
            display: flex; flex-direction: column; gap: 20px;
            -webkit-overflow-scrolling: touch;
        }

        /* æ¶ˆæ¯æ ·å¼ */
        .msg { display: flex; align-items: flex-start; gap: 10px; max-width: 90%; }
        .avatar {
            width: 42px; height: 42px; border-radius: 4px; flex-shrink: 0;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold; font-size: 14px; background: #4a90e2;
        }
        .content-box { display: flex; flex-direction: column; max-width: calc(100% - 52px); }
        .nickname { font-size: 12px; color: var(--text-sub); margin-bottom: 4px; }
        
        .bubble {
            padding: 10px 12px; border-radius: 6px; position: relative;
            line-height: 1.5; font-size: 15px; background: #fff;
            color: var(--text-main); border: 0.5px solid #e7e7e7;
        }

        /* å·¦å³é€»è¾‘ */
        .msg.left { align-self: flex-start; }
        .msg.left .bubble::after {
            content: ""; position: absolute; left: -10px; top: 10px;
            border: 5px solid transparent; border-right-color: #fff;
        }
        .msg.right { align-self: flex-end; flex-direction: row-reverse; }
        .msg.right .bubble { background: #95ec69; border: none; }
        .msg.right .bubble::after {
            content: ""; position: absolute; right: -10px; top: 10px;
            border: 5px solid transparent; border-left-color: #95ec69;
        }

        /* åº•éƒ¨å·¥å…·æ  */
        footer {
            background: #f7f7f7; border-top: 1px solid var(--border-color);
            padding-bottom: env(safe-area-inset-bottom); flex-shrink: 0;
        }
        .input-bar {
            display: flex; align-items: center; padding: 10px; gap: 8px;
        }
        .icon-btn { width: 28px; height: 28px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        #input-msg {
            flex: 1; border: none; padding: 10px; border-radius: 6px;
            outline: none; font-size: 16px; background: #fff; min-height: 40px;
        }
        #send-btn {
            background: var(--wechat-green); color: #fff; border: none;
            padding: 8px 12px; border-radius: 4px; font-size: 14px;
            display: none; /* åˆå§‹éšè— */
        }

        /* ç¾¤æˆå‘˜å¼¹çª—æ ·å¼ */
        #member-modal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #ededed; z-index: 1000; display: none;
            flex-direction: column;
        }
        .modal-header { height: 50px; background: #ededed; display: flex; align-items: center; padding: 0 15px; border-bottom: 1px solid #ddd; }
        .member-grid {
            flex: 1; overflow-y: auto; padding: 20px;
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
        }
        .member-item { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .member-avatar { width: 50px; height: 50px; border-radius: 6px; background: #fff; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .member-name { font-size: 12px; color: #666; text-align: center; }

        /* åª’ä½“æ¶ˆæ¯é¢„è§ˆ */
        .media-preview { max-width: 180px; border-radius: 4px; }
    </style>
</head>
<body>

<div id="chat-wrapper">
    <header>
        <span onclick="alert('è¿”å›èŠå¤©åˆ—è¡¨')">â€¹ å¾®ä¿¡</span>
        <span id="group-title">LLM è¯¸ç¥ä¹‹æˆ˜ (12)</span>
        <span onclick="toggleMembers()" style="font-size: 24px; cursor: pointer;">Â·Â·Â·</span>
    </header>
    
    <div id="message-list">
        <div style="text-align:center; color:#b2b2b2; font-size:12px; margin:10px 0;">ä¸‹åˆ 15:30</div>
        <div class="msg left">
            <div class="avatar">G</div>
            <div class="content-box">
                <div class="nickname">GPT-4o</div>
                <div class="bubble">æ¬¢è¿å„ä½æ¥åˆ°ç¾¤èŠï¼ç‚¹å‡»å³ä¸Šè§’å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¤§æ¨¡å‹æˆå‘˜ã€‚ä½ å¯ä»¥å‘å›¾ç‰‡ã€è¯­éŸ³æˆ– @ æŸäººã€‚</div>
            </div>
        </div>
    </div>

    <footer>
        <div class="input-bar">
            <div class="icon-btn" onclick="alert('è¯­éŸ³åŠŸèƒ½å¼€å‘ä¸­')">
                <svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" fill="#333"/><path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="#333"/></svg>
            </div>
            
            <input type="text" id="input-msg" placeholder="">
            
            <div class="icon-btn" id="plus-btn" onclick="document.getElementById('file-input').click()">
                <svg viewBox="0 0 24 24" width="24" height="24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="#333"/></svg>
            </div>
            
            <button id="send-btn">å‘é€</button>
        </div>
        <input type="file" id="file-input" style="display:none" accept="image/*,video/*,audio/*">
    </footer>

    <div id="member-modal">
        <div class="modal-header">
            <span onclick="toggleMembers()" style="cursor:pointer; color:#000; font-size:18px;">â€¹ èŠå¤©ä¿¡æ¯</span>
        </div>
        <div class="member-grid" id="member-list-container">
            </div>
        <div style="padding: 20px; border-top: 1px solid #ddd; text-align: center; color: #ff4d4f; background: #fff;">
            åˆ é™¤å¹¶é€€å‡º
        </div>
    </div>
</div>

<script>
    // ç¾¤æˆå‘˜æ•°æ®
    const llmMembers = [
        { name: 'GPT-4o', avatar: 'ğŸ¤–', color: '#74aa9c' },
        { name: 'Claude 3.5', avatar: 'ğŸ­', color: '#d97706' },
        { name: 'Gemini 1.5', avatar: 'â™Š', color: '#4285f4' },
        { name: 'DeepSeek', avatar: 'ğŸ‹', color: '#005fb8' },
        { name: 'Llama 3', avatar: 'ğŸ¦™', color: '#0668e1' },
        { name: 'Mistral', avatar: 'ğŸŒªï¸', color: '#f5d142' },
        { name: 'Qwen 2.5', avatar: 'ğŸŸ£', color: '#6347d1' },
        { name: 'Moonshot', avatar: 'ğŸŒ™', color: '#000000' },
        { name: 'Yi-Large', avatar: 'é›¶', color: '#e60012' },
        { name: 'Minimax', avatar: 'ğŸš', color: '#ff6b00' },
        { name: 'Grok', avatar: 'âœ–ï¸', color: '#000' },
        { name: 'æ·»åŠ ', avatar: 'ï¼‹', color: '#ccc' }
    ];

    const input = document.getElementById('input-msg');
    const sendBtn = document.getElementById('send-btn');
    const plusBtn = document.getElementById('plus-btn');
    const messageList = document.getElementById('message-list');
    const modal = document.getElementById('member-modal');

    // åˆå§‹åŒ–ç¾¤æˆå‘˜åˆ—è¡¨
    const memberContainer = document.getElementById('member-list-container');
    llmMembers.forEach(m => {
        const item = document.createElement('div');
        item.className = 'member-item';
        item.innerHTML = `
            <div class="member-avatar" style="border: 1px solid #eee;">${m.avatar}</div>
            <div class="member-name">${m.name}</div>
        `;
        memberContainer.appendChild(item);
    });

    // ç›‘å¬è¾“å…¥ï¼Œåˆ‡æ¢åŠ å·å’Œå‘é€æŒ‰é’®
    input.addEventListener('input', () => {
        if (input.value.trim().length > 0) {
            sendBtn.style.display = 'block';
            plusBtn.style.display = 'none';
        } else {
            sendBtn.style.display = 'none';
            plusBtn.style.display = 'flex';
        }
    });

    // åˆ‡æ¢ç¾¤æˆå‘˜é¢æ¿
    function toggleMembers() {
        modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
    }

    // å‘é€æ¶ˆæ¯
    function handleSend() {
        const text = input.value.trim();
        if (!text) return;

        const msgHtml = `
            <div class="msg right">
                <div class="avatar" style="background:#07c160">æˆ‘</div>
                <div class="content-box">
                    <div class="bubble">${text}</div>
                </div>
            </div>
        `;
        messageList.insertAdjacentHTML('beforeend', msgHtml);
        input.value = '';
        sendBtn.style.display = 'none';
        plusBtn.style.display = 'flex';
        messageList.scrollTop = messageList.scrollHeight;

        // æ¨¡æ‹Ÿ AI å›å¤
        if (text.includes('@')) {
            setTimeout(() => {
                const aiMsg = `<div class="msg left">
                    <div class="avatar" style="background:#005fb8">ğŸ‹</div>
                    <div class="content-box">
                        <div class="nickname">DeepSeek</div>
                        <div class="bubble">æ”¶åˆ°ï¼æ­£åœ¨ä¸ºæ‚¨è°ƒåŠ¨ç®—åŠ›åˆ†æä¸­...</div>
                    </div>
                </div>`;
                messageList.insertAdjacentHTML('beforeend', aiMsg);
                messageList.scrollTop = messageList.scrollHeight;
            }, 1000);
        }
    }

    sendBtn.onclick = handleSend;
    input.onkeypress = (e) => { if (e.key === 'Enter') handleSend(); };

    // å¤šåª’ä½“ä¸Šä¼ é€»è¾‘
    document.getElementById('file-input').onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        const type = file.type.split('/')[0];
        reader.onload = (ev) => {
            let mediaHtml = '';
            if (type === 'image') mediaHtml = `<img src="${ev.target.result}" class="media-preview">`;
            else if (type === 'video') mediaHtml = `<video src="${ev.target.result}" controls class="media-preview"></video>`;
            else if (type === 'audio') mediaHtml = `<audio src="${ev.target.result}" controls style="width:150px"></audio>`;

            const msgHtml = `<div class="msg right"><div class="avatar" style="background:#07c160">æˆ‘</div><div class="content-box"><div class="bubble" style="background:none;border:none;padding:0">${mediaHtml}</div></div></div>`;
            messageList.insertAdjacentHTML('beforeend', msgHtml);
            messageList.scrollTop = messageList.scrollHeight;
        };
        reader.readAsDataURL(file);
    };
</script>
</body>
</html>
