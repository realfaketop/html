
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    
    <title>RF-TOP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Share+Tech+Mono&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { 
            --bg-deep: #030303; 
            --bg-panel: #0a0a0a;
            --accent: #00ff41; 
            --accent-dim: rgba(0, 255, 65, 0.1);
            --danger: #ff2a2a;
            --tech-blue: #00f0ff;
            --border-color: #333;
        }
        
        body { 
            font-family: 'Share Tech Mono', monospace; 
            background-color: var(--bg-deep); 
            color: #d4d4d4; 
            overflow: hidden; 
            height: 100vh;
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .scanlines {
            position: fixed; inset: 0; pointer-events: none; z-index: 2;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
        }
        
        /* 科技边框容器 */
        .tech-border {
            position: relative;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            border-radius: 4px;
        }
        .tech-border::before { content: ''; position: absolute; top: -1px; left: -1px; width: 8px; height: 8px; border-top: 2px solid var(--accent); border-left: 2px solid var(--accent); border-top-left-radius: 4px; }
        .tech-border::after { content: ''; position: absolute; bottom: -1px; right: -1px; width: 8px; height: 8px; border-bottom: 2px solid var(--accent); border-right: 2px solid var(--accent); border-bottom-right-radius: 4px; }

        /* 按钮样式 */
        .cyber-btn {
            position: relative;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-color);
            color: #888;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            border-radius: 4px; 
        }
        .cyber-btn:hover:not(:disabled) {
            background: var(--accent-dim); border-color: var(--accent); color: var(--accent);
            box-shadow: 0 0 15px var(--accent-dim); text-shadow: 0 0 5px var(--accent);
        }
        .cyber-btn.active-real {
            background: rgba(0, 255, 65, 0.2); border-color: var(--accent); color: var(--accent);
            box-shadow: inset 0 0 20px rgba(0, 255, 65, 0.2);
        }
        .cyber-btn.active-fake {
            background: rgba(255, 42, 42, 0.2); border-color: var(--danger); color: var(--danger);
            box-shadow: inset 0 0 20px rgba(255, 42, 42, 0.2);
        }
        .submit-trigger {
            background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.1), transparent);
            border: 1px solid var(--tech-blue); color: var(--tech-blue);
        }
        .submit-trigger:hover:not(:disabled) {
            background: var(--tech-blue); color: black; box-shadow: 0 0 30px rgba(0, 240, 255, 0.4);
        }
        .submit-trigger:disabled { opacity: 0.3; cursor: not-allowed; border-color: #333; color: #555; background: none; }

        /* 视频容器 */
        .monitor-frame {
            position: relative; width: 100%; height: 100%; background: #000; border: 1px solid #333;
            border-radius: 4px; overflow: hidden;
        }
        .monitor-overlay {
            position: absolute; inset: 0; pointer-events: none; z-index: 5;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.9); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
        }
        .monitor-label {
            position: absolute; top: 10px; left: 10px; z-index: 10;
            background: rgba(0,0,0,0.8); padding: 2px 8px;
            font-size: 10px; color: var(--accent); border: 1px solid var(--accent); border-radius: 2px;
        }
        .bili-full { position: absolute; inset: 0; width: 100%; height: 100%; }

        /* === 侧边评论把手 === */
        #comm-handle {
            position: fixed; 
            right: 0; 
            top: 50%; 
            transform: translateY(-50%);
            width: 36px; 
            height: 160px;
            background: rgba(5, 10, 15, 0.95);
            border: 1px solid var(--tech-blue); 
            border-right: none; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; z-index: 50; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: -2px 0 15px rgba(0, 240, 255, 0.15);
            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
        }
        
        #comm-handle:hover {
            background: rgba(0, 240, 255, 0.15);
            box-shadow: -4px 0 25px rgba(0, 240, 255, 0.3);
            width: 44px;
        }

        #comm-handle.hidden-handle {
            transform: translate(100%, -50%); opacity: 0; pointer-events: none;
        }

        .comm-text {
            writing-mode: vertical-rl; text-orientation: mixed;
            font-family: 'Orbitron'; font-size: 12px; font-weight: bold;
            letter-spacing: 4px; color: #888; transition: 0.3s;
        }
        #comm-handle:hover .comm-text { color: var(--tech-blue); text-shadow: 0 0 8px var(--tech-blue); }
        
        /* === 评论抽屉 === */
        #comment-drawer {
            position: absolute; 
            inset: 0; 
            background: #050505;
            z-index: 40; 
            transform: translateX(105%); 
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            display: flex; flex-direction: column;
            border: 1px solid var(--tech-blue);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
        }
        #comment-drawer.open { transform: translateX(0); }

        .cyber-scroll::-webkit-scrollbar { width: 4px; }
        .cyber-scroll::-webkit-scrollbar-thumb { background: var(--tech-blue); }
        .cyber-input { 
            background: #000; border: 1px solid #333; color: var(--tech-blue); 
            font-family: 'Share Tech Mono'; width: 100%; transition: 0.3s; border-radius: 4px;
        }
        .cyber-input:focus { outline: none; border-color: var(--tech-blue); box-shadow: 0 0 10px rgba(0,240,255,0.2); }

        /* 手机端适配 */
        @media (max-width: 1024px) {
            #comment-drawer {
                transform: translateY(105%);
            }
            #comment-drawer.open { transform: translateY(0); }
            .right-panel-container { padding-right: 0 !important; }
        }

        .nav-link:hover { color: var(--tech-blue); text-shadow: 0 0 5px var(--tech-blue); }
        .nav-link i { margin-right: 4px; }

    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden relative selection:bg-green-500 selection:text-black">

    <div class="scanlines"></div>

    <header class="h-12 bg-black/80 border-b border-[#222] flex items-center justify-between px-6 z-20 shrink-0 backdrop-blur-sm">
        <div class="flex items-center gap-3">
            <i class="fas fa-biohazard text-green-500 animate-pulse text-lg"></i>
            <span class="text-xl font-[Orbitron] font-black text-white tracking-widest">
                RF<span class="text-green-500">-TOP</span>
            </span>
        </div>
        
        <div class="hidden md:flex gap-6 text-[10px] font-mono text-gray-500 tracking-wider">
            <a href="https://github.com/feeday" target="_blank" class="nav-link transition"><i class="fab fa-github"></i>GITHUB</a>
            <a href="https://www.bilibili.com/" target="_blank" class="nav-link transition"><i class="fab fa-bilibili"></i>BILIBILI</a> 
            <a href="https://huggingface.co/spaces?category=video-generation&sort=likes" target="_blank" class="nav-link transition"><i class="fas fa-smile"></i>HUGGINGFACE</a>
            <a href="https://arxiv.org/list/cs.AI/recent" target="_blank" class="nav-link transition"><i class="fas fa-book"></i>ARXIV</a>
            <a href="https://matrix.tencent.com/ai-detect/" target="_blank" class="nav-link transition" title="Zhuque AI Detection"><i class="fas fa-shield-alt"></i>MATRIX</a>
            <a href="https://artificialanalysis.ai/image/leaderboard/editing" target="_blank" class="nav-link transition" title="Image Editing Leaderboard"><i class="fas fa-ranking-star"></i>MODEL-I2I</a>
            <a href="https://aigcarena.com/" target="_blank" class="nav-link transition" title="MagicArena"><i class="fas fa-bolt"></i>MODEL-PK</a>
            <a href="https://mixboard.google.com/" target="_blank" class="nav-link transition" title="Nano Banana Pro"><i class="fas fa-wand-magic-sparkles"></i>Banana-Pro</a>
          <a href="https://gemini.google.com/" target="_blank" class="nav-link transition" title="Gemini">
    <i class="fas fa-robot"></i>Gemini</a>
        </div>

        <div class="text-[10px] font-mono text-gray-500 flex items-center gap-2">
            <span class="w-1.5 h-1.5 rounded-full bg-green-500 box-shadow-green"></span>
            <span>SYSTEM: ONLINE</span>
        </div>
    </header>

    <div class="flex-grow flex flex-col lg:flex-row overflow-hidden relative z-10 p-4 gap-4">
        
        <div class="lg:w-[70%] h-[40vh] lg:h-auto flex flex-col gap-2">
            <div class="monitor-frame relative flex-grow tech-border">
                <div class="monitor-label">LIVE FEED // RAW_DATA</div>
                
                <div class="absolute top-2 right-2 z-20 flex items-center gap-2">
                    <a id="bili-source-btn" href="#" target="_blank" title="在新窗口打开原视频" 
                       class="flex items-center gap-2 px-2 py-1 bg-black/80 border border-gray-700 rounded text-[10px] font-mono text-gray-400 hover:text-[#00f0ff] hover:border-[#00f0ff] transition backdrop-blur-sm group">
                        <i class="fab fa-bilibili"></i>
                        <span>SOURCE</span>
                        <i class="fas fa-external-link-alt text-[8px] opacity-50 group-hover:opacity-100"></i>
                    </a>
                 
                </div>

                <div class="monitor-overlay"></div>
                
                <div id="video-container" class="w-full h-full relative z-0">
                    <div class="absolute inset-0 flex items-center justify-center text-gray-700 animate-pulse font-mono text-xs">
                        ESTABLISHING UPLINK...
                    </div>
                </div>

                <div id="result-overlay" class="absolute inset-0 z-30 bg-black/90 hidden flex-col items-center justify-center backdrop-blur-md">
                    <h1 id="overlay-status" class="text-6xl font-[Orbitron] font-black mb-2 tracking-widest text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-500"></h1>
                    <div id="overlay-detail" class="text-xl font-mono mb-8 text-center text-gray-400"></div>
                    
                    <div class="tech-border p-6 max-w-md w-full text-left mb-8 bg-black/50">
                        <div class="text-xs text-gray-500 font-mono mb-4 border-b border-gray-800 pb-2">FORENSIC REPORT</div>
                        <div class="grid grid-cols-2 gap-4 text-sm font-mono mb-4">
                            <div>VISUAL: <span id="trace-video" class="font-bold"></span></div>
                            <div>AUDIO: <span id="trace-audio" class="font-bold"></span></div>
                        </div>
                        <p id="trace-desc" class="text-xs text-gray-400 leading-relaxed border-l-2 border-gray-700 pl-3"></p>
                    </div>
                    
                    <button onclick="changePage(1)" class="cyber-btn px-8 py-3 text-white border-white hover:bg-white hover:text-black">
                        NEXT SUBJECT <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </div>
            
            <div class="h-10 tech-border flex items-center justify-between px-4 bg-black/40">
                <button id="btn-prev" onclick="changePage(-1)" class="text-xs text-gray-500 hover:text-white transition">
                    <i class="fas fa-caret-left mr-1"></i> PREV
                </button>
                <div class="text-xs font-mono text-gray-600">
                    FILE_INDEX: <span id="page-indicator" class="text-white">00 / 00</span>
                </div>
                <button id="btn-next" onclick="changePage(1)" class="text-xs text-gray-500 hover:text-white transition">
                    NEXT <i class="fas fa-caret-right ml-1"></i>
                </button>
            </div>
        </div>

        <div class="right-panel-container lg:w-[35%] flex flex-col gap-4 h-full relative overflow-hidden group pr-16">
            
            <div class="tech-border p-4 bg-black/40 text-center shrink-0">
                <h2 class="text-white font-[Orbitron] text-lg tracking-widest mb-1">ANALYSIS DECK</h2>
                <div class="h-0.5 w-1/3 bg-green-500 mx-auto opacity-50"></div>
            </div>

            <div class="tech-border flex-grow p-6 bg-black/40 flex flex-col justify-center gap-8 relative">
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#333 1px, transparent 1px); background-size: 10px 10px;"></div>

                <div class="relative z-10">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold text-gray-400 font-[Orbitron] tracking-wider"><i class="fas fa-eye mr-2 text-green-500"></i>VISUAL STREAM</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="setTrack('video', 'real')" id="btn-video-real" class="cyber-btn py-4">Real</button>
                        <button onclick="setTrack('video', 'fake')" id="btn-video-fake" class="cyber-btn py-4">Fake</button>
                    </div>
                </div>

                <div class="relative z-10">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold text-gray-400 font-[Orbitron] tracking-wider"><i class="fas fa-wave-square mr-2 text-blue-500"></i>AUDIO STREAM</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="setTrack('audio', 'real')" id="btn-audio-real" class="cyber-btn py-4">Real</button>
                        <button onclick="setTrack('audio', 'fake')" id="btn-audio-fake" class="cyber-btn py-4">Fake</button>
                    </div>
                </div>

                <div class="mt-4 relative z-10">
                    <button onclick="submitAnalysis()" id="submit-btn" class="cyber-btn submit-trigger w-full py-5 text-sm tracking-widest" disabled>
                        INITIALIZE REPORT
                    </button>
                </div>
            </div>

            <div id="comment-drawer">
                <div class="p-4 border-b border-gray-800 bg-black flex justify-between items-center shrink-0">
                    <h2 class="text-[#00f0ff] font-bold font-[Orbitron] tracking-widest text-sm">
                        <i class="fas fa-network-wired mr-2"></i>DATA_LOG
                    </h2>
                    <button onclick="toggleDrawer()" class="text-gray-500 hover:text-white transition"><i class="fas fa-times"></i></button>
                </div>
                
                <div id="comment-list" class="flex-grow overflow-y-auto p-4 space-y-4 cyber-scroll">
                    <div class="text-center text-gray-600 text-xs mt-10 font-mono">ESTABLISHING CONNECTION...</div>
                </div>
                
                <div class="p-4 border-t border-gray-800 bg-black shrink-0">
                    <div class="mb-3">
                        <label class="text-[10px] text-gray-500 font-mono mb-1 block">AGENT_ID</label>
                        <input type="text" id="username" placeholder="Anonymous" class="cyber-input px-2 py-1 text-xs" maxlength="15">
                    </div>
                    <div class="mb-3">
                        <label class="text-[10px] text-gray-500 font-mono mb-1 block">MESSAGE_PACKET</label>
                        <textarea id="message" placeholder="Input data..." class="cyber-input p-2 text-xs h-20 resize-none"></textarea>
                    </div>
                    <button onclick="postComment()" id="send-btn" class="cyber-btn w-full py-2 text-xs border-[#00f0ff] text-[#00f0ff] hover:bg-[#00f0ff] hover:text-black">
                        TRANSMIT
                    </button>
                </div>
            </div>

        </div>
    </div>

    <div id="comm-handle" onclick="toggleDrawer()" title="Open Logs">
        <div class="comm-text">
            <i class="fas fa-caret-left mb-2"></i> COMM_LOG
        </div>
    </div>

    <script>
        const database = [
            { id: '01', src: 'BV1Y34y1X7CK', video_status: 'real', audio_status: 'real', source_video: 'Real MV', source_audio: 'Real Audio', desc: 'GEM邓紫棋《光年之外》-2018年NASA颁奖典礼' },
            { id: '02', src: 'BV1My2YBsEcJ', video_status: 'fake', audio_status: 'fake', source_video: 'Hailuo-2.6', source_audio: 'Hailuo-2.6', desc: '可灵2.6-画面都是合成' }
          
        ];

        let currentIndex = 0;
        let userSelection = { video: null, audio: null };

        window.onload = () => {
            loadCase(0);
            if (localStorage.getItem('rf_username')) document.getElementById('username').value = localStorage.getItem('rf_username');
            
            document.addEventListener('keydown', (e) => {
                if(e.key === 'ArrowRight') changePage(1);
                if(e.key === 'ArrowLeft') changePage(-1);
            });
        };

        function changePage(direction) {
            let newIndex = currentIndex + direction;
            if (newIndex >= database.length) newIndex = 0;
            if (newIndex < 0) newIndex = database.length - 1;
            loadCase(newIndex);
        }

        function loadCase(index) {
            currentIndex = index;
            const currentData = database[currentIndex];
            
            // 更新页码
            document.getElementById('page-indicator').innerText = `${String(index + 1).padStart(2, '0')} / ${String(database.length).padStart(2, '0')}`;
            
            // 重置状态
            document.getElementById('result-overlay').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('flex');
            document.querySelectorAll('.cyber-btn').forEach(b => b.classList.remove('active-real', 'active-fake'));
            
            userSelection = { video: null, audio: null };
            updateSubmitButton();
            
            // === 核心逻辑：更新跳转按钮链接 ===
            const sourceBtn = document.getElementById('bili-source-btn');
            if (sourceBtn) {
                sourceBtn.href = `https://www.bilibili.com/video/${currentData.src}`;
            }

            // 更新播放器
            const container = document.getElementById('video-container');
            container.innerHTML = `<iframe src="//player.bilibili.com/player.html?bvid=${currentData.src}&page=1&high_quality=1&danmaku=0&autoplay=1" class="bili-full" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts"></iframe>`;
        }

        function setTrack(track, status) {
            userSelection[track] = status;
            const btnReal = document.getElementById(`btn-${track}-real`);
            const btnFake = document.getElementById(`btn-${track}-fake`);
            
            btnReal.classList.remove('active-real');
            btnFake.classList.remove('active-fake');
            
            if (status === 'real') btnReal.classList.add('active-real');
            else btnFake.classList.add('active-fake');
            
            updateSubmitButton();
        }

        function updateSubmitButton() {
            const btn = document.getElementById('submit-btn');
            if (userSelection.video && userSelection.audio) {
                btn.disabled = false; btn.innerText = "INITIALIZE REPORT";
            } else {
                btn.disabled = true; btn.innerText = "AWAITING INPUT...";
            }
        }

        function submitAnalysis() {
            const data = database[currentIndex];
            const videoCorrect = userSelection.video === data.video_status;
            const audioCorrect = userSelection.audio === data.audio_status;
            const allCorrect = videoCorrect && audioCorrect;
            
            document.getElementById('trace-video').innerText = data.source_video;
            document.getElementById('trace-video').className = data.video_status === 'real' ? 'font-bold text-green-400' : 'font-bold text-red-400';
            
            document.getElementById('trace-audio').innerText = data.source_audio;
            document.getElementById('trace-audio').className = data.audio_status === 'real' ? 'font-bold text-green-400' : 'font-bold text-red-400';
            
            document.getElementById('trace-desc').innerText = data.desc;
            
            const status = document.getElementById('overlay-status');
            const detail = document.getElementById('overlay-detail');
            
            if (allCorrect) {
                status.innerHTML = "MATCHED";
                status.className = "text-6xl font-[Orbitron] font-black mb-2 tracking-widest text-green-500 drop-shadow-[0_0_10px_rgba(0,255,0,0.5)]";
                detail.innerText = "鉴定成功 // ACCESS GRANTED";
            } else {
                status.innerHTML = "FAILURE";
                status.className = "text-6xl font-[Orbitron] font-black mb-2 tracking-widest text-red-500 drop-shadow-[0_0_10px_rgba(255,0,0,0.5)]";
                let msg = [];
                if (!videoCorrect) msg.push("视觉误判");
                if (!audioCorrect) msg.push("听觉误判");
                detail.innerText = `${msg.join(' + ')} // 鉴定失败`;
            }
            
            const overlay = document.getElementById('result-overlay');
            overlay.classList.remove('hidden');
            overlay.classList.add('flex');
        }

        // 评论区开关逻辑
        function toggleDrawer() {
            const drawer = document.getElementById('comment-drawer');
            const handle = document.getElementById('comm-handle');
            
            if (drawer.classList.contains('open')) {
                drawer.classList.remove('open');
                handle.classList.remove('hidden-handle');
            } else {
                drawer.classList.add('open');
                handle.classList.add('hidden-handle');
                loadComments();
            }
        }

        async function loadComments() {
            const list = document.getElementById('comment-list');
            try {
                // 注意：这里需要你后端的 PHP API 支持
                const res = await fetch('api/get_comments.php');
                const json = await res.json();
                
                if (json.status === 'success') {
                    list.innerHTML = '';
                    if (json.data.length === 0) {
                        list.innerHTML = '<div class="text-center text-gray-600 text-xs mt-10 font-mono">NO LOGS FOUND</div>';
                        return;
                    }
                    json.data.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'mb-4 border-l border-gray-700 pl-3 pb-1 hover:border-[#00f0ff] transition-colors group';
                        div.innerHTML = `
                            <div class="flex justify-between items-baseline mb-1">
                                <span class="text-xs font-bold text-gray-400 group-hover:text-[#00f0ff] font-[Orbitron]">${item.username}</span>
                                <span class="text-[10px] text-gray-700 font-mono">${timeAgo(item.created_at)}</span>
                            </div>
                            <div class="text-xs text-gray-300 break-words font-mono leading-relaxed opacity-80">${item.content}</div>
                        `;
                        list.appendChild(div);
                    });
                }
            } catch (err) {
                // 演示模式下显示模拟数据
                if(list.innerHTML.includes('ESTABLISHING')) {
                     list.innerHTML = '<div class="text-yellow-600 text-xs font-mono text-center">DEMO MODE: API DISCONNECTED</div>';
                }
            }
        }

        async function postComment() {
            const user = document.getElementById('username').value.trim() || 'Agent';
            const msg = document.getElementById('message').value.trim();
            const btn = document.getElementById('send-btn');
            
            if (!msg) return;
            
            btn.innerHTML = 'TRANSMITTING...';
            btn.disabled = true;
            
            try {
                const res = await fetch('api/post_comment.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: user, content: msg })
                });
                const json = await res.json();
                if (json.status === 'success') {
                    document.getElementById('message').value = '';
                    loadComments();
                    localStorage.setItem('rf_username', user);
                } else {
                    alert('ERROR: ' + json.msg);
                }
            } catch (err) {
                alert('DEMO MODE: CANNOT SEND TO SERVER');
            } finally {
                btn.innerHTML = 'TRANSMIT';
                btn.disabled = false;
            }
        }

        function timeAgo(dateString) {
            const date = new Date(dateString.replace(/-/g, '/'));
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'NOW';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return minutes + 'M';
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return hours + 'H';
            return Math.floor(hours / 24) + 'D';
        }
    </script>
</body>
</html>
